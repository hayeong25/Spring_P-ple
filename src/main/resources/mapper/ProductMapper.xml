<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.api.pple.dao.ProductDao">
    <select id="getProductList" resultType="com.api.pple.dto.ProductDto">
        SELECT product_code AS code,
               product_category AS category,
               product_brand AS brand,
               product_name AS name,
               product_url AS url,
               product_stock_count AS stock,
               product_original_price AS price,
               product_sale_price AS salePrice,
               product_discount_ratio AS saleRatio
        FROM PRODUCT
        WHERE product_display_yn = 1
    </select>

    <select id="getProductDetail" parameterType="String" resultType="com.api.pple.dto.ProductDto">
        SELECT  product_code AS code,
                product_category AS category,
                product_brand AS brand,
                product_name AS name,
                product_url AS url,
                product_stock_count AS stock,
                product_original_price AS price,
                product_sale_price AS salePrice,
                product_discount_ratio AS saleRatio
        FROM PRODUCT
        WHERE product_code = #{productCode}
    </select>

    <insert id="registerProduct" useGeneratedKeys="true" keyColumn="product_code" keyProperty="code">
        INSERT INTO PRODUCT (
            product_category,
            product_brand,
            product_name,
            product_url,
            product_stock_count,
            product_original_price,
            product_sale_price,
            product_discount_ratio,
            product_display_yn
        ) VALUES (
            #{category},
            #{brand},
            #{name},
            #{url},
            #{stock},
            #{price},
            #{salePrice},
            #{saleRatio},
            1
        )
    </insert>

    <update id="deleteProduct">
        UPDATE PRODUCT
        SET product_display_yn = 0
        WHERE product_code = #{productCode}
    </update>
</mapper>